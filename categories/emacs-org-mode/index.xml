<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Emacs Org-Mode on Happy Coding</title><link>//tywhisky.github.io/categories/emacs-org-mode/</link><description>Recent content in Emacs Org-Mode on Happy Coding</description><generator>Hugo</generator><language>en-us</language><copyright>Tainef</copyright><lastBuildDate>Wed, 07 Sep 2022 00:00:00 +0000</lastBuildDate><atom:link href="//tywhisky.github.io/categories/emacs-org-mode/index.xml" rel="self" type="application/rss+xml"/><item><title>A trap with validate_length/3 of Ecto</title><link>//tywhisky.github.io/posts/a-trap-with-validate-length-of-ecto/</link><pubDate>Wed, 07 Sep 2022 00:00:00 +0000</pubDate><guid>//tywhisky.github.io/posts/a-trap-with-validate-length-of-ecto/</guid><description>&lt;div id="outline-container-headline-1" class="outline-3"&gt;
&lt;h3 id="headline-1"&gt;
validate_length/3
&lt;/h3&gt;
&lt;div id="outline-text-headline-1" class="outline-text-3"&gt;
&lt;p&gt;
Quote to Ecto&amp;#39;s document, this is the describe:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;@spec validate_length(t(), atom(), Keyword.t()) :: t()
Validates a change is a string or list of the given length.&lt;/p&gt;
&lt;p&gt;
Note that the length of a string is counted in graphemes by default. If using this validation to match a character limit of a database backend, it&amp;#39;s likely that the limit ignores graphemes and limits the number of unicode characters. Then consider using the :count option to limit the number of codepoints (:codepoints), or limit the number of bytes (:bytes).&lt;/p&gt;</description></item><item><title>[Docker] Differences between -v and --mount</title><link>//tywhisky.github.io/posts/the-difference-of-mount-and-v-for-docker/</link><pubDate>Sat, 13 Aug 2022 00:00:00 +0000</pubDate><guid>//tywhisky.github.io/posts/the-difference-of-mount-and-v-for-docker/</guid><description>&lt;p&gt;
Last week, I wanted to upgrade the version of my livebook in Docker. And I had a very strange problem.
I did the following:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class="verbatim"&gt;ssh&lt;/code&gt; my server&lt;/li&gt;
&lt;li&gt;docker container stop &amp;amp; rm&lt;/li&gt;
&lt;li&gt;docker images pull livebook/livebook:latest&lt;/li&gt;
&lt;li&gt;docker run&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;No errors occurred during this period and everything looks good.
But when I open the page of livebook, the update prompt is still visiting the screen.
Then I go to the settings page. The version is still 0.6.1(the latest version is 0.6.3). &lt;/p&gt;</description></item><item><title>The road of Code Review for me</title><link>//tywhisky.github.io/posts/the-road-of-code-review-for-me/</link><pubDate>Sat, 13 Aug 2022 00:00:00 +0000</pubDate><guid>//tywhisky.github.io/posts/the-road-of-code-review-for-me/</guid><description>&lt;p&gt;
在我作为工程师在最初期，一直都是一些更有经验的老师傅 Review 我的代码，提出他们的意见，那时候，我对此也没有自己是否也应该 
Review 他人的代码的想法，一方面不了解 Code Review 是一件不比亲自开发更容易的事情，另一方面那时的我忙于 “吸收” ，也无暇顾及。&lt;/p&gt;
&lt;p&gt;
但是随着时间的增长，我意识到了我对 Code Review 这方面的欠缺，当我不得不开始 Review 同事的代码时，我发现我遇到的最大的问题
是我没有任何想法，或是说即便有想法也会被我自洽的解释所忽略。这让我感觉很奇怪，因为我写自己的代码总是了然于胸，并且往往会在许多地方纠结不已，我不免怀疑我是否这段时间都毫无提升？&lt;/p&gt;
&lt;p&gt;
为了解决这个问题，我开始在 Review 别人代码的时候只关注需求，按照自己的理解在 Draft 或者大脑中实现一遍 “是我的话，会怎么做”，
然后回头带着自己的 Style 和遇到的问题再正式开始 Review，这个方法很有效，只有一个缺点，就是耗费我个人的成本十分巨大，而如何
解决这个问题就变成了我必须处理的事情。&lt;/p&gt;
&lt;div id="outline-container-headline-1" class="outline-3"&gt;
&lt;h3 id="headline-1"&gt;
What&amp;#39;s the point
&lt;/h3&gt;
&lt;div id="outline-text-headline-1" class="outline-text-3"&gt;
&lt;p&gt;
按照我的观察，通常每个人的 Review 侧重都是会有区别的。与我个人而言，我认为优秀的代码的特性应该是 “可读性” 大于 “必要性能”。
因此我会优先 Review 代码的 “可读性”。&lt;/p&gt;
&lt;p&gt;
可读性其实是一个宽大的概念，其中不止包括了&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Function 和 Module 的 “有意义的” 命名&lt;/li&gt;
&lt;li&gt;Function 和 Module 合理的结构&lt;/li&gt;
&lt;li&gt;在必要的地方是否有合适的注释&lt;/li&gt;
&lt;li&gt;PR 整体的流程是否符合常规逻辑和直觉&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-headline-2" class="outline-3"&gt;
&lt;h3 id="headline-2"&gt;
My Solution
&lt;/h3&gt;
&lt;div id="outline-text-headline-2" class="outline-text-3"&gt;
&lt;ol&gt;
&lt;li&gt;结合需求和 Diff 最快速的了解这个 Pull Request 的流程而不去管细节实现。&lt;/li&gt;
&lt;li&gt;思考流程上是否存在问题，如果没有则按照流程 Review 具体实现。&lt;/li&gt;
&lt;li&gt;先看 Module / Function 的名字，在心中有一个自己的判断，再去对照具体实现和刚才的判断作对比。&lt;/li&gt;
&lt;li&gt;考虑性能和检查测试的覆盖。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;以上几步中其实都有和 Author 思路作对比的过程，因此最重要的一点是，任何我无法理解的地方，我都
会留下 comment ，而不是强行带入 Author ，自己给出自洽的解释，亦或是过分用力的理解这部分的代码。&lt;/p&gt;</description></item><item><title>Process exit rules for Elixir</title><link>//tywhisky.github.io/posts/process-exit-rules-for-elixir/</link><pubDate>Fri, 03 Jun 2022 00:00:00 +0000</pubDate><guid>//tywhisky.github.io/posts/process-exit-rules-for-elixir/</guid><description>&lt;div id="outline-container-headline-1" class="outline-3"&gt;
&lt;h3 id="headline-1"&gt;
With the beginning
&lt;/h3&gt;
&lt;div id="outline-text-headline-1" class="outline-text-3"&gt;
&lt;p&gt;
Process.flag(:trap_exit, true) 能够将 Process 发出的 Exit 信号捕获为 Msg,&lt;/p&gt;
&lt;p&gt;
型号的类型有三类, 分别是 :kill, :normal 和其他&lt;/p&gt;
&lt;p&gt;
其中被杀的进程本身捕获不到 :kill , 但是其他进程能捕获到, 可以看下面的例子。&lt;/p&gt;
&lt;p&gt;
:kill&lt;/p&gt;
&lt;div class="src src-elixir"&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-elixir" data-lang="elixir"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;worker &lt;span style="color:#f92672"&gt;=&lt;/span&gt; spawn(&lt;span style="color:#66d9ef"&gt;fn&lt;/span&gt; &lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;Process&lt;/span&gt;&lt;span style="color:#f92672"&gt;.&lt;/span&gt;flag(&lt;span style="color:#e6db74"&gt;:trap_exit&lt;/span&gt;, &lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;receive&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;do&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; msg &lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;IO&lt;/span&gt;&lt;span style="color:#f92672"&gt;.&lt;/span&gt;inspect(msg, &lt;span style="color:#e6db74"&gt;label&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;In worker&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;Process&lt;/span&gt;&lt;span style="color:#f92672"&gt;.&lt;/span&gt;sleep(&lt;span style="color:#ae81ff"&gt;2000&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;end&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;end&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;monitor &lt;span style="color:#f92672"&gt;=&lt;/span&gt; spawn(&lt;span style="color:#66d9ef"&gt;fn&lt;/span&gt; &lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;Process&lt;/span&gt;&lt;span style="color:#f92672"&gt;.&lt;/span&gt;flag(&lt;span style="color:#e6db74"&gt;:trap_exit&lt;/span&gt;, &lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;Process&lt;/span&gt;&lt;span style="color:#f92672"&gt;.&lt;/span&gt;link(worker)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;receive&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;do&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; msg &lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;IO&lt;/span&gt;&lt;span style="color:#f92672"&gt;.&lt;/span&gt;inspect(msg, &lt;span style="color:#e6db74"&gt;label&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;In monitor&amp;#34;&lt;/span&gt;) &lt;span style="color:#75715e"&gt;# In monitor: {:EXIT, #PID&amp;lt;0.375.0&amp;gt;, :killed}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;end&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;end&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;Process&lt;/span&gt;&lt;span style="color:#f92672"&gt;.&lt;/span&gt;sleep(&lt;span style="color:#ae81ff"&gt;1000&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;Process&lt;/span&gt;&lt;span style="color:#f92672"&gt;.&lt;/span&gt;exit(worker, &lt;span style="color:#e6db74"&gt;:kill&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;Process&lt;/span&gt;&lt;span style="color:#f92672"&gt;.&lt;/span&gt;alive?(worker) &lt;span style="color:#f92672"&gt;|&amp;gt;&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;IO&lt;/span&gt;&lt;span style="color:#f92672"&gt;.&lt;/span&gt;inspect(&lt;span style="color:#e6db74"&gt;label&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;Worker still alive?&amp;#34;&lt;/span&gt;) &lt;span style="color:#75715e"&gt;# Worker still alive?: false&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;
:normal&lt;/p&gt;
&lt;div class="src src-elixir"&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-elixir" data-lang="elixir"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;worker &lt;span style="color:#f92672"&gt;=&lt;/span&gt; spawn(&lt;span style="color:#66d9ef"&gt;fn&lt;/span&gt; &lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;Process&lt;/span&gt;&lt;span style="color:#f92672"&gt;.&lt;/span&gt;flag(&lt;span style="color:#e6db74"&gt;:trap_exit&lt;/span&gt;, &lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;receive&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;do&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; msg &lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;IO&lt;/span&gt;&lt;span style="color:#f92672"&gt;.&lt;/span&gt;inspect(msg, &lt;span style="color:#e6db74"&gt;label&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;In worker&amp;#34;&lt;/span&gt;) &lt;span style="color:#75715e"&gt;# In worker: {:EXIT, #PID&amp;lt;0.297.0&amp;gt;, :normal}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;Process&lt;/span&gt;&lt;span style="color:#f92672"&gt;.&lt;/span&gt;sleep(&lt;span style="color:#ae81ff"&gt;2000&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;end&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;end&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;monitor &lt;span style="color:#f92672"&gt;=&lt;/span&gt; spawn(&lt;span style="color:#66d9ef"&gt;fn&lt;/span&gt; &lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;Process&lt;/span&gt;&lt;span style="color:#f92672"&gt;.&lt;/span&gt;flag(&lt;span style="color:#e6db74"&gt;:trap_exit&lt;/span&gt;, &lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;Process&lt;/span&gt;&lt;span style="color:#f92672"&gt;.&lt;/span&gt;link(worker)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;receive&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;do&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; msg &lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;IO&lt;/span&gt;&lt;span style="color:#f92672"&gt;.&lt;/span&gt;inspect(msg, &lt;span style="color:#e6db74"&gt;label&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;In monitor&amp;#34;&lt;/span&gt;) &lt;span style="color:#75715e"&gt;# In monitor: {:EXIT, #PID&amp;lt;0.844.0&amp;gt;, :normal}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;end&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;end&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;Process&lt;/span&gt;&lt;span style="color:#f92672"&gt;.&lt;/span&gt;sleep(&lt;span style="color:#ae81ff"&gt;1000&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;Process&lt;/span&gt;&lt;span style="color:#f92672"&gt;.&lt;/span&gt;exit(worker, &lt;span style="color:#e6db74"&gt;:normal&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;Process&lt;/span&gt;&lt;span style="color:#f92672"&gt;.&lt;/span&gt;alive?(worker) &lt;span style="color:#f92672"&gt;|&amp;gt;&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;IO&lt;/span&gt;&lt;span style="color:#f92672"&gt;.&lt;/span&gt;inspect(&lt;span style="color:#e6db74"&gt;label&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;Worker still alive?&amp;#34;&lt;/span&gt;) &lt;span style="color:#75715e"&gt;# Worker still alive?: true&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;
如果用别的进程使用 :normal 去杀死一个进程, 那个进程是不会死的, 但是会当场受到
“死讯” , 如上第二段 Code 中, “In monitor” 将会在 worker 打印了死讯后 2 秒后
输出。&lt;/p&gt;</description></item></channel></rss>