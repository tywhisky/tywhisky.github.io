<!doctype html><html><head lang=en><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>[Docker] Differences between -v and --mount - Happy Coding</title><link rel=icon type=image/png href=favicon.ico><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="
Last week, I wanted to upgrade the version of my livebook in Docker. And I had a very strange problem.
I did the following:

ssh my server
docker container stop & rm
docker images pull livebook/livebook:latest
docker run

No errors occurred during this period and everything looks good.
But when I open the page of livebook, the update prompt is still visiting the screen.
Then I go to the settings page. The version is still 0.6.1(the latest version is 0.6.3). "><meta property="og:image" content="//tywhisky.github.io/"><meta property="og:url" content="//tywhisky.github.io/posts/the-difference-of-mount-and-v-for-docker/"><meta property="og:site_name" content="Happy Coding"><meta property="og:title" content="[Docker] Differences between -v and --mount"><meta property="og:description" content="Last week, I wanted to upgrade the version of my livebook in Docker. And I had a very strange problem. I did the following:
ssh my server docker container stop & rm docker images pull livebook/livebook:latest docker run No errors occurred during this period and everything looks good. But when I open the page of livebook, the update prompt is still visiting the screen. Then I go to the settings page. The version is still 0.6.1(the latest version is 0.6.3)."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-08-13T00:00:00+00:00"><meta property="article:modified_time" content="2022-08-13T00:00:00+00:00"><meta property="article:tag" content="Docker"><meta name=twitter:card content="summary"><meta name=twitter:title content="[Docker] Differences between -v and --mount"><meta name=twitter:description content="Last week, I wanted to upgrade the version of my livebook in Docker. And I had a very strange problem. I did the following:
ssh my server docker container stop & rm docker images pull livebook/livebook:latest docker run No errors occurred during this period and everything looks good. But when I open the page of livebook, the update prompt is still visiting the screen. Then I go to the settings page. The version is still 0.6.1(the latest version is 0.6.3)."><link href=//tywhisky.github.io/css/fonts.2c2227b81b1970a03e760aa2e6121cd01f87c88586803cbb282aa224720a765f.css rel=stylesheet><link rel=stylesheet type=text/css media=screen href=//tywhisky.github.io/css/main.a87126a5d38398207e58225b2d1a9faf97f546982f44b3ffb9715a264da36c90.css><link id=darkModeStyle rel=stylesheet type=text/css href=//tywhisky.github.io/css/dark.f163b79c6de51d14a766ff9f0563053de7f06a4d1bf7b85a59608bf96e566710.css media="(prefers-color-scheme: dark)"><script type=text/javascript src=//tywhisky.github.io/js/MathJax.js></script><script type=text/x-mathjax-config>
		MathJax.Hub.Config({
			tex2jax: {
				inlineMath: [['$','$'], ['\\(','\\)']],
				displayMath: [['$$','$$'], ['\[','\]']],
				processEscapes: true,
				processEnvironments: true,
				skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
				TeX: { equationNumbers: { autoNumber: "AMS" },
						 extensions: ["AMSmath.js", "AMSsymbols.js"] }
			}
		});
		</script><link rel=stylesheet href=//tywhisky.github.io/katex/katex.min.css><script defer src=//tywhisky.github.io/katex/katex.min.js></script><script defer src=//tywhisky.github.io/katex/auto-render.min.js onload=renderMathInElement(document.body)></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})})</script></head><body><div class=content><header><div class=main><a href=//tywhisky.github.io/>Happy Coding</a></div><nav><a href=//tywhisky.github.io/>Home</a>
<a href=//tywhisky.github.io/posts>All posts</a>
<a href=//tywhisky.github.io/about>About</a>
<a href=//tywhisky.github.io/tags>Tags</a></nav></header><main><article><div class=post-container><div class=post-content><div class=title><h1 class=title>[Docker] Differences between -v and --mount</h1><div class=meta>Posted on Aug 13, 2022</div></div><section class=body><p>Last week, I wanted to upgrade the version of my livebook in Docker. And I had a very strange problem.
I did the following:</p><ul><li><code class=verbatim>ssh</code> my server</li><li>docker container stop & rm</li><li>docker images pull livebook/livebook:latest</li><li>docker run</li></ul><p>No errors occurred during this period and everything looks good.
But when I open the page of livebook, the update prompt is still visiting the screen.
Then I go to the settings page. The version is still 0.6.1(the latest version is 0.6.3).</p><p>The first thing I suspected was the browser, So I check the sessionStorage, localStorage and
the Cookie, delete all the infomation of them. And I return the page, the update prompt
has no change.</p><p>This meant I had to go check the server, I checked the docker image first. The version of images for
livebook has no problem after I check the hash.
Then I check the port, the container, and any other. All of them have no problem.</p><p>After control variables, the last point I have not checked is the <code class=verbatim>--mount</code>. In my docker shell,
I use –mount to mounted the directory to save the note of livebook. And i <code class=verbatim>mkdir</code> a customized
dir in <code class=verbatim>/var/lib/docker/volumes/my-dir/</code>. When i use <code class=verbatim>-v type=mount</code> instead of <code class=verbatim>--mount</code>, I found
the version turned into 0.6.3!</p><div id=outline-container-headline-1 class=outline-3><h3 id=headline-1>So what's the Differences</h3><div id=outline-text-headline-1 class=outline-text-3><p>Ref from the official explanation:</p><ul><li>Because the -v and –volume flags have been a part of Docker for a long time, their behavior cannot be changed. This means that there is one behavior that is different between -v and –mount.</li><li>If you use -v or –volume to bind-mount a file or directory that does not yet exist on the Docker host, -v creates the endpoint for you. It is always created as a directory.</li><li>If you use –mount to bind-mount a file or directory that does not yet exist on the Docker host, Docker does not automatically create it for you, but generates an error.</li></ul><p>But that doesn't explain why you can't upgrade the version.</p><p>In fact, this is because livebook will generate the current version of Release in the directory where it is mounted, and later, even if you change the image, the old release will still be read as the image of the current container.</p></div></div></section><div class=post-tags></div></div></div><div id=disqus_thread></div><script type=text/javascript>(function(){if(window.location.hostname=="localhost")return;var t,e=document.createElement("script");e.type="text/javascript",e.async=!0,t="yourDisqusShortname",e.src="//"+t+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)})()</script><noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by
Disqus.</a></noscript><a href=http://disqus.com/ class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></article></main><footer><div style=display:flex><a class=soc href=https://github.com/tywhisky rel=me title=GitHub><svg class="feather"><use href="//tywhisky.github.io/svg/feather-sprite.51cf5647cb1987f769b616558f2620fd9423d72058490231b391bf6aa3744b55.svg#github"/></svg></a><a class=border></a></div><div class=footer-info>2026 Tainef | <a href=https://github.com/athul/archie>Archie Theme</a> | Built with <a href=https://gohugo.io>Hugo</a></div></footer></div></body></html>